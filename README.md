# cpp-transport-catalogue
Учебный проект транспортного справочника. Транспортный справочник реализует систему хранения транспортных маршрутов и обработку запросов к ней. Программа состоит из двух частей. Первая часть ```make_base``` отвечает за создание базы транспортного справочника и её сериализации в файл с помощью protobuf. Вторая часть ```process_requests``` реализует десериализацию базы из файла и использование её для ответов на запросы пользователя, в том числе формирования карты транспортных маршрутов в формате svg.

## Сборка проекта
Для использования проекта необходимо установить и настроить [protobuf](https://protobuf.dev/). Для этого по [ссылке](https://github.com/protocolbuffers/protobuf/releases/tag/v21.12) нужно выбрать архив protobuf-cpp, скачать и распаковать его на своём компьютере. Исходный код содержит CMake-проект. Затем необходимо создать директории build-debug и build-release для сборки двух конфигураций Protobuf.
В директории build-debug необходимо выполнить следующие команды:

    cmake <путь к распакованному архиву>/protobuf-3.21.12 \
        -DCMAKE_BUILD_TYPE=Debug                          \
        -Dprotobuf_BUILD_TESTS=OFF                        \
        -DCMAKE_INSTALL_PREFIX=<путь к месту установки пакета>/Protobuf
    cmake --build .

После сборки нужно установить библиотеку:

    cmake --install .

Сборка проекта осуществляется через cmake (требуется версия 3.10). Для этого в командной строке нужно перейти в директорию с проектом, после чего выполнить следующие команды:

    mkdir build
    cd build
    cmake ../ -G "Ninja"
    cmake --build .

## Запуск и проверка работы проекта
В директории tests расположены .json файлы с исходными данными для обоих частей программы.
Для формирования тестовой базы транспортного справочника, находясь в директории проекта, необходимо ввести

    build\\transport_catalogue.exe make_base < tests\\test_{номер_теста}_make_base.json

Для направления тестовых запросов к сформированной базе, необходимо ввести

    build\\transport_catalogue.exe process_requests < tests\\test_{номер_теста}_process_requests.json > tests\\test_{номер_теста}_results.json

В файле test_{номер_теста}_results.json директории tests будут записаны результаты тестовых запросов.